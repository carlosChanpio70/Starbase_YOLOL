include "std/math"
include "std/logic"
define :Scan_Button = :SB
define :Display_1 = :SD1
define :Display_2 = :SD2
define :Material = :M
define :Volume = :V
define :Index = :I
define :Scan_Results = :SR

line_skip = "\n"
Tier_Display = line_skip+"Tier: "
Score_D1 = line_skip+"Rock Score:"+line_skip
Score_D2 = "/100"
Effy = line_skip+"Efficiency:"+line_skip
Stack = 1728
Perc = 100
Tier_01 = 6557
Tier_02 = 7945
Tier_03 = 11555
Tier_04 = 12851
Tier_05 = 17763
Tier_06 = 19603
Tier_07 = 45929
Tier_08 = 31351
Tier_09 = 215837
Tier_10 = 468058
MaxEF_01=20
MaxEF_02=53
MaxEF_03=69
MaxEF_04=69
MaxEF_05=38
MaxEF_06=37
MaxEF_07=39
MaxEF_08=13
MaxEF_09=69
MaxEF_10=69
if :Scanbutton==1 then
    :Scan = 1
    logic_wait(:Scan==1)
    Scan_Results = :Scan_Results
    if Scan_Results==0 then
        Display=Line_Skip*2+"No Target"
    else
        :Index=0
        M1=(:Material-Ore)
        V1=:Volume
        Stack_Res_1=math_floor(V1*Stack)
        if Scan_Results==1 then
        DR1=M1+Line_Skip+V1+kv
        else if Scan_Results>=1 then
            :Index=1
            M2=(:Material-Ore)
            V2=:Volume
            DR2=DR1+Line_Skip+M2+Line_Skip+V2+kv
        end
        Volume=(V1+V2)
        if Volume<=Tier_01 then
            Tier=1
            Tier_V = Tier_01
            Max_EF = MaxEF_01
        else if Volume<=Tier_02 and Volume>Tier_01 then
            Tier=2
            Tier_V = Tier_02
            Max_EF = MaxEF_02
        else if Volume<=Tier_03 and Volume>Tier_02 then
            Tier=3
            Tier_V = Tier_03
            Max_EF = MaxEF_03
        else if Volume<=Tier_04 and Volume>Tier_03 then
            Tier=4
            Tier_V = Tier_04
            Max_EF = MaxEF_04
        else if Volume<=Tier_05 and Volume>Tier_04 then
            Tier=5
            Tier_V = Tier_05
            Max_EF = MaxEF_05
        else if Volume<=Tier_06 and Volume>Tier_05 then
            Tier=6
            Tier_V = Tier_06
            Max_EF = MaxEF_06
        else if Volume<=Tier_07 and Volume>Tier_08 then
            Tier=7
            Tier_V = Tier_07
            Max_EF = MaxEF_07
        else if Volume<=Tier_08 and Volume>Tier_06 then
            Tier=8
            Tier_V = Tier_08
            Max_EF = MaxEF_08
        else if Volume<=Tier_09 and Volume>Tier_07 then
            Tier=9
            Tier_V = Tier_09
            Max_EF = MaxEF_09
        else if Volume<=Tier_10 and Volume>Tier_09 then
            Tier=10
            Tier_V = Tier_10
            Max_EF = MaxEF_10
        end
        EF = (V2/V1)*Perc
        Score = (EF/Max_EF)*Perc
        Display_2 = Tier_Display+Tier+Effy+Max_EF+"/"+EF+Score_D1+Score+Score_D2
        :Display_2 = Display_2
    end
else
    Display_1 = line_skip*2+" Offline"
end
:Display_1 = Display_1
:Display_2 = Display_2